<html>
<head>
    <style type="text/css">
table {
    margin-left: auto;
    margin-right: auto;
}
td {
    vertical-align: top;
}
.file_name {
    margin: 10px;
    padding: 5px;
    font-size: 250%;
    font-weight: bold;
    background-color: #ccc;
    font-family: monospace;
}
pre {
    width: 700px;
    margin: 10px;
    padding: 5px;
    background: #eee;
    font-size: 130%;
    font-weight: bold;
}
    </style>
</head>
<body>
    <table>
        <tr>
            <td>
                <div class="file_name" style="background: #dbb">train.py</div>
                <pre style="background: #fdd">
...
</pre>
            </td>
            <td>
                <div class="file_name">requirements.txt</div>
                <pre>
...
</pre>
                <div class="file_name" style="background: #bcd">datasets.py</div>
                    <pre style="background: #def">
def load_abuse(tag='insult', max_count=50000):
    fn = '../../make_abuse_data/data/tag_%s.txt' % tag
    class2texts = defaultdict(list)
    for j in each_json(fn):
        text = j['text']
        klass = j['class']
        class2texts[klass].append(text)

        n = len(class2texts[klass])
        if n &lt; max_count:
            continue

        keep_going = False
        for klass, texts in class2texts.iteritems():
            if len(texts) &lt; max_count:
                keep_going = True
                break

        if not keep_going:
            break

    pairs = []
    for klass, texts in class2texts.iteritems():
        for text in texts:
            pair = (text, klass)
            pairs.append(pair)

    random.shuffle(pairs)

    n = len(pairs)
    train = zip(*pairs[:int(n * 0.8)])
    val = zip(*pairs[int(n * 0.8):int(n * 0.9)])
    test = zip(*pairs[int(n * 0.9):])
    return train, val, test
</pre>
                <div class="file_name" style="background: #6c6">pipelines.py</div>
<pre style="background: #bfb">
...
</pre>
                <div class="file_name" style="background: #dcb">networks.py</div>
                <pre style="background: #fed">
...
</pre>
            </td>
        </tr>
    </table>
</body>
</html>
